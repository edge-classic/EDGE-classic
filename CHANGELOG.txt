https://github.com/dashodanger/EDGE-classic

Current as of: December 2022


CHANGELOG for EDGE-Classic 1.3 (since EDGE-Classic 1.21)
====================================

Bugs fixed
----------
+ Fixed CHANGE_TEX SKY not working with skyboxes
+ Fixed alignment of flats when both ALIGN and SCALE are used
+ Doom episode 1 intermission screen animation speed was wrong
+ Single sector maps no longer give a nodebuilder error
+ Fixed a bug displaying tall patches with a non-zero Y Offset
+ Several old DEHACKED issues fixed (original AliensTC for example)
+ Conflicts between Doom graphics and PNGs causing errors are now 
  fixed (the infamous "Error occurred scanning image: xxx")
+ Do not apply invisibility effect to a zoomed weapon
+ Fixed IDCLEV mistakenly identifying non-marker lumps as valid map markers
+ Fixed crash involving items without a map spawnpoint being added to the
  Deathmatch item respawn queue
+ Fixed incorrect parsing of keypad (10-key) scancodes
+ Fixed main menu cursor scaling/placement when all menu item images are empty
  (i.e., background image alone is used as the "menu")
+ Fixed weapons with animated ready states having jittery swaying/bobbing
+ Fixed Boom generalized ceilings using their sector's floors for movement targets
+ Fixed monsters being able to activate W1/WR lines at the edge of a dropoff that
  is too high for them to descend
+ Fixed Boom Set Friction lines with very short line lengths being ineffective


General Improvements
--------------------
+ Replaced TinySoundFont with FluidLite, supporting a wider range of MIDI events and effects
+ Live soundfont (FluidLite)/instrument bank (OPL) selector
+ DEH_EDGE cleanup and improvements
+ Improved screen resolution and aspect modes
+ New Harmony base WAD assets
+ Auto-detect music type for DDFPLAY (with one exception: IMF, as detailed under New Features)
+ No longer need to press Up/JUMP or Down/CROUCH key to navigate ladders: Just mlook + forward is enough.
+ Tags assigned to map things are now supported
+ Allow multiple WAIT_UNTIL_DEAD scripts to trigger for the same object
+ Improved handling of in-game messages
+ ENDOOM screen now integrated into quit dialog (unless custom background image is defined in STYLES.DDF)
+ Added libYMFM for improved VGM music handling and format support; disabled Game Music Emu VGM support
+ Replaced Modplug with XMP (non-lite version) for module tracker music for better compatibility
  - Formats requiring prior depacking are still not supported
+ Multiple DDFANIM entries can now reference the same images (the entries themselves must still have unique names
  to prevent conflicts)
+ Borderless Fullscreen mode added to the Set Resolution menu; list of Windowed resolutions updated to accommodate
  displays up to 4K
+ Improved support for filepaths and program arguments with non-ASCII characters


New Features
------------

+ New Video Options menu item: Framerate Target
  - Can cycle between 35/70 FPS
  - Default framerate target is now 70 FPS

+ New Video Options menu item: Overlay
  - Can cycle through various pseudo-CRT/scanline effects
  - Current options: None, Lines 1X, Lines 2X, Checkered, Vertical, and Grill

+ New Gameplay Options menu item: MBF21 Map compatibility
  - Can toggle to enable/disable MBF21 line and sector types/flags/specials
  - Default is "Off"

+ New Gameplay Options menu item: Bobbing
  - Controls if view/weapon are bobbed while moving
  - Options are "Full", "Head Only", "Weapon Only", "None"
  - Default is "Full"

+ New Gameplay Options menu item: Erraticism
  - Time will only advance when the player moves or fires ("SuperHot")
  - Player's momentum will be preserved if in mid-air/jumping, 
    otherwise it will be lost when the movement keys are released
  - Can hold the Use key to advance time without having to move or fire
    (helpful when waiting for lifts, etc)

+ New Performance Options menu
  - Current options
    - Reduce Draw Distance: Will cull rendering at a set distance
    - Slow Thinkers Over Distance: Helps alleviate performance hit from extreme
      monster/missile counts. Not recommended for normal gameplay
    - Dynamic Light Limit: Set maximum number of dynamic lights to render at once

+ Vastly improved Deathbot navigation and combat

+ New console command: showmaps
  - Will show the warp name and level description for accessible maps

+ New console variable: r_forceflatlighting
  - When set to 1, will use a flat lighting formula versus Doom's traditional distance-based light banding calculations
  - Overrides any lighting settings in an episode's DDFGAME definition
  - Default is 0, "traditional" Doom behavior

+ Support OPL emulated playback of MUS and MIDI music lumps via YMFM.
  - Can use GENMIDI lumps (Default) or external instrument bank files
  - *.wopl, *.op2, *.opl, *.ad, and *.tmb external banks supported
  - External banks must be placed in the /soundfont directory prior to startup

+ New music formats supported: FLAC, VGZ (compressed VGM), IMF, XMI/RMI/GMF/EA MIDI Formats
  - IMF songs must have a playlist entry type of 'IMF280', 'IMF560', or 'IMF700' to correctly
    set the song's playback rate

+ SF3 formatted soundfonts are now supported in addition to SF2
  - Loading times for SF3 fonts are typically longer due to the need for decompression

+ DSDHACKED support.

+ FONTS.DDF
  - New font type: TRUETYPE ("TYPE = TRUETYPE;", as opposed to IMAGE or PATCH)
    - Required parameters:
      - TTF = <string>, TTF/OTF file or lump
    - Optional parameters:
      - TTF_DEFAULT_SIZE = <int>, default (scaled to HUD) rendering size for this font. If not provided,
        a default value of 7 will be used.
      - TTF_SMOOTHING = "ALWAYS", "NEVER", or "ON_DEMAND". Affects behavior of the font when the Smoothing
        option in the Video Options menu is adjusted. Defaults to "ON_DEMAND".

+ STYLES.DDF
  - New property: ENTRY_ALIGNMENT = <string>, accepts "LEFT", "CENTER", or "RIGHT" to set text/image alignment for menu item names
  - New CURSOR customization options:
    - CURSOR.POSITION = <string>, accepts "LEFT", "CENTER", "RIGHT", or "BOTH" to determine cursor position relative to menu item. 
      "BOTH" will drawn the cursor in both LEFT/RIGHT positions. Defaults to "LEFT".
    - CURSOR.BORDER = <bool>, only has an effect when the cursor position is set to CENTER. Will scale up to the dimensions of the tallest
      menu item. Good for highlights/frames/border style cursors
    - CURSOR.TRANSLUCENCY = <percentage>, controls cursor image translucency
    - CURSOR.IMAGE = <string>, image to use instead of the default for this menu's cursor
    - CURSOR.STRING = <string>, if present, will use these characters from the style's font as the cursor instead of an image
    - CURSOR.SCALING = <bool>, will set whether or not the cursor scales proportionally to menu item heights. Defaults to true.
  
+ THINGS.DDF
  - New property: SIGHT_DISTANCE=<number> which is how far a thing can see in map units.
  - New property: HEAR_DISTANCE=<number> which is how far a thing can hear the player in map units.
  - 3 new actions: 
    - JUMP_LIQUID(state:frame,xx%) similar to the normal jump action except that it will only trigger if
      the thing is in contact with a floor flat indicated as LIQUID in DDFFLATS.
    - JUMP_SKY(state:frame,xx%) similar to the normal jump action except that it will only trigger if
      the thing is in an outdoor sector i.e. ceiling is sky.
	- NOISE_ALERT will cause nearby monsters to be alerted. Add it to a monsters death states so his
	  final groan will warn nearby monsters to expect trouble ;)
  - New pickup benefit: POWERUP_TIMESTOP
    - Player can move and fire normally
    - Projectiles will remain at the point at which they were fired until time resumes; hitscan or melee 
      attacks will damage an enemy but they won't react/"die" until time resumes
    - Switches/doors/lifts can be activated during time stop, but will not move until time resumes

+ LINES.DDF
  - New LINE_EFFECT: TAGGED_OFFSET_SCROLL
    - Matches MBF21 behavior; all lines with the same tag will use this line's offsets for offset scrolling
    - Target lines can still use their own offsets for texture alignment
    - Scrolling speed is divided by 8 for fine tuning 
  - New property: SCROLL_TYPE = DISPLACE or ACCEL
    - Affects the PUSH_THINGS, SCROLL_FLOOR, SCROLL_CEILING, VECTOR_SCROLL, and TAGGED_OFFSET_SCROLL specials
    - Matches Boom/MBF21 behavior (see https://github.com/kraflab/mbf21/blob/master/docs/spec.md under 'Linedef Types' for reference if needed)
  - Improved GLASS=TRUE functionality: LINE_PARTS= can now be used to define what the "broken" mid-texture will be.
    LINE_PARTS accepts the following arguments: LEFT_LOWER, LEFT_UPPER, RIGHT_LOWER, RIGHT_UPPER. 
	(back of linedef is right, front of linedef is left).
  - Added 4 new BREAKABLE wall line types (similar behaviour to glass): 
    [835] Breakable: when shot, midtex will change to back lower texture
    [836] Breakable: when shot, midtex will change to back upper texture
    [837] Breakable: when shot, midtex will change to front lower texture
    [838] Breakable: when shot, midtex will change to front upper texture

+ IMAGES.DDF
  - New SPECIAL: FORCE_PRECACHE
    - Will force image to be precached on startup regardless of other settings
  - New SPECIAL: GRAYSCALE
    - Will force image (for this definition) to be in grayscale even if the original lump/file isn't

+ REKKR added as a recognized IWAD

+ COALHUDS: new commands
  -mapobject.count(thingID): returns number of objects of this type on the map
  -player.query_object(MaxDistance, WhatInfo): returns information about the currently targetted thing.
   MaxDistance is the limit to how far we can query an object. 
   WhatInfo is a number from 1 to 5 and can be: 
	1 (NAME)
	2 (CURRENT_HEALTH)
	3 (SPAWN_HEALTH)
	4 (PICKUP_BENEFIT)
	5 (KILL_BENEFIT)
  -mapobject.query_tagged(ThingMapTag, WhatInfo): returns information about the thing with the tag we specified. WhatInfo is the same as player.query_object()
  -player.query_weapon(MaxDistance, Whatinfo, [secAttackInfo]): returns information about the currently targetted weapon.
   MaxDistance is the limit to how far we can query an object.  
   Using the optional [secAttackInfo] we can get information about the weapons secondary attack. 
   WhatInfo and SecAttackInfo are a number from 1 to 9 and can be: 
    1 (NAME)
    2 (ZOOM FACTOR)
    3 (AMMOTYPE)
    4 (AMMOPERSHOT)
    5 (CLIPSIZE)
    6 (DAMAGE Nominal)
    7 (DAMAGE Max)
    8 (RANGE)
    9 (AUTOMATIC)
  -hud.erraticism_active() and hud.time_stop_active(): Check Time Stop/Erraticism state from within COALHUDS

+ No longer necessary to specify an image type in DDFIMAGE i.e. "IMAGE_DATA=LUMP:FOOBAR;" is now permitted.

+ Improved Boom Support
  - Line 254 vector scrolling will use the appropriate direction instead of only scrolling vertically
  - Implemented Lines 245-249: Displace scroll/push
  - Implemented Lines 214-218: Accel scroll/push
  - Improved Line 242 compatibility (colormaps/invisible platforms/etc)
  - Implemented light level changes for tagged manual door sectors
  - Implemented BEX-specific keycard/skull strings
  - Implemented OB_* DEHACKED string replacements (not strictly BEX, but Freedoom 1/2 use them)

+ Improved MBF Support
  - Implemented A_Mushroom
  - MBF Dog is back! Rocking new sprites and sounds, credits to gzdoom(original sprites: Nash Muhandes, original sfx: Kinsie)
    New CVAR: dogs <number> which will spawn 1-3 friendly helper dogs at coop spawn points.

+ Initial MBF21 Support
  - Implemented Lines 1024-1026: Tagged offset scrolling (Normal/Displace/Accel)
  - Implemented "Block land monsters" and "Block players" linedef flags
  - Implemented "Alternate damage mode" and "Kill grounded monsters" sector types



CHANGELOG for EDGE-Classic 1.21 (since EDGE-Classic 1.2)
====================================

Bugs fixed
----------
+ Fixed issues when launching from a location other than the executable directory on non-Windows builds
+ Fixed rare ceiling crusher-related bug
+ Text based menus for <Episode select> and <Difficulty select> were not working if the Main menu was using custom graphics
+ Fixed null string CTD in HUD_DrawText and font_c::StringWidth
+ Fixed issue with FS_ReadDir returning relative paths
+ Restored "Hudless" option in COALHUDS HUD cycling

General Improvements
--------------------
+ Improved STYLES.DDF functionality across console and menus; backgrounds images/colors and translucency are no longer hardcoded
+ Added "Edge" UDMF namespace detection in preparation for EDGE-Classic's UDMF spec
+ Improved menu cursor positioning and scaling
+ Back mid-texture on a Glass line type is automagically mirrored
+ Load/Save menu will use DDFLANG difficulty strings instead of hard-coded Doom strings when showing savegame details
+ Improved CMD_Dir result display
+ DOOMWADDIR and DOOMWADPATH will now be evaluated together instead of separately
+ If no -iwad parameter is given, an IWAD will be selected from all IWADs discovered in default search paths based on a scoring/preference system
  - Doom 2/Freedoom Phase 2/Final Doom are highest priority due to highest compatibilty with mods/PWADs
  - Doom 1/Freedoom Phase 1 are second in line
  - Remaining Doom-based IWADs (HacX/Harmony for now) are third
  - Heretic/Blasphemer, being the newest games supported, are after those
  - If a new custom standalone IWAD (with EDGEIWAD lump) is present in the search list, it will be considered last

New Features
------------
+ Custom standalone IWADs can be created by adding an EDGEIWAD lump to the WAD. This will allow it to pass the automatic IWAD
  detection

+ STYLES.DDF
  - New properties: X_OFFSET and Y_OFFSET. Will set all menu entries in this style to the same x/y offset.
  - New SPECIAL flag: NO_STRETCH_FULLSCREEN, which will disable default behaviour of stretching backgrounds to fill the screen
  
+ Lines.ddf
  -Added 3 new BREAKABLE glass line types: 
  [830] Breakable Glass: monsters can see through it and can break it
  [831] Breakable Glass: monsters: cannot see through it but can break it
  [832] Breakable Glass: monsters: cannot see through it and cannot break it

+ Sectors.ddf
  -Added 6 new coloured sector types:
  [4471] EDGE Blue Hue
  [4472] EDGE Green Hue
  [4473] EDGE Red Hue
  [4474] EDGE Yellow Hue
  [4475] EDGE Purple Hue
  [4476] EDGE Grey Hue
  
  
  

CHANGELOG for EDGE-Classic 1.2 (since EDGE-Classic 1.1)
====================================

Bugs fixed
----------
+ Fixed bug preventing Backspace from clearing the top keybind entry in a menu without another key being pressed first
+ Fixed occasional crash when loading a save game containing 3D floors
+ Fixed Load_DOOM sound loading function trying to allocate memory for empty/stub sounds
+ Fixed ALWAYS_LOUD things.ddf special not working with non-enemy mobjs
+ Fixed SFX loaders treating all sounds as Mono regardless of original sound format
+ Fixed pressing the Use key to respawn activating linedefs when the player comes back to life
+ Fixed player possibly getting stuck in slider doors if attempting to cross through while they are closing
+ Fixed PWAD PLAYPAL lumps not properly being applied to images
+ Fixed being able to pick up items while completely still (for instance, voodoo doll spawn on top of an item would immediately
  give the player said item upon starting the level)
+ Fixed voodoo doll spawn points telefragging other objects (could result in instakill upon entering level)
+ Fixed DEH_EDGE giving wrong weapon priorities to the rocket launcher and plasma rifle
+ Fixed FORCE_AIM attacks being affected by visibility modifiers
+ Fixed BERSERK_MULTIPLY not being applied to projectiles
+ Fixed ZOOM_FOV = 0 in DDFWEAP not disabling zoom for a weapon
+ Fixed erroneous missing sprite rotations when loading sprites from multiple sources
+ Fixed possible CTD when a malformed lump name is looked up
+ Fixed font recoloring appearing incorrect with non-Doom IWADs or certain PWADs that have their own COLORMAP/PLAYPAL lumps
+ Fixed occasional appearance of blank episode in episode selection menu with certain PWADs
+ Fixed SFX with SINGULAR+PRECIOUS flags being cutoff when another SINGULAR SFX in the same category is played
+ Fixed failure to detect binary-format maps with only the bare minimum number of required lumps
+ Fixed rare issue where some PNGs with transparency were detected as solid images
+ Fixed map position ("You Are Here") graphics being hidden by a custom Entering image
+ Fixed AddImageGraphic function trying to process TGA images as Doom format
+ Fixed ON_DEATH RTS scripts triggering when the condition uses a monster that was never in the map to begin with

General Improvements
--------------------
+ DEHEXTRA Support
+ COAL/C++ Interop: 
  -new_game(), load_game(), save_game(), and end_level() hooks added for more flexibility
+ COAL VM:
  -GetFloat, GetString and GetVector added to retrieve COAL variable values from the C++ side
  -SetFloat, SetString and SetVector added to set COAL variables from the C++ side
  -Function parameters can now be declared optional; all required parameters must be defined first
+ Original RNG LUT for M_Random/P_Random replaced with improved quality generators from the C++ stdlib
+ Crosshair color and size can now be changed via the Video Options menu
+ Pre-level story text/intermission will now be skipped when using the IDCLEV/level warp cheat
+ Mouse wheel up/down will now page through option menus that have Prev/Next pages (like the keybindings/Load Game menus)
+ Improved changing resolutions while in fullscreen mode
+ DDF and RTS now use a consistent INVENTORY## naming scheme for inventory items and scripts
+ COALHUDS:
  -player.use_inventory now only needs the inventory item number passed to it
+ Module Music:
  -libxmp-lite music player replaced with libmodplug, providing far better performance and load times,
   with all of the following formats now supported:
   MOD, S3M, XM, IT, 669, AMF (both of them), AMS, DBM, DMF, DSM, FAR,
   MDL, MED, MTM, OKT, PTM, STM, ULT, UMX, MT2, PSM
+ Vertical offset scrolling will now work with midmask textures. Midmaskers without vertical scrolling
  will remain clamped per the existing implementation
+ Freedoom Phase 1 and 2 have their own base WAD, which provides corrected text and menu graphics
+ Added capturing of console content (if active) in screenshots
+ Number of available AMMO and INVENTORY types increased to 99
+ Widescreen ratio resolutions added to windowed resolution list
+ DOOMWADPATH environment variable now supported
+ AJBSP updated to produce only XGL3 nodes compatible with both binary/UDMF map formats
  - XGL3 node writing adapted from Eureka codebase with vertex comparison improvements from ketmar/k8vavoom
  - XGL3 node loading functions adapted from EDGE 2.x
+ GWA file will always be built, regardless of a WAD having internal GL lumps
  - This prevents crashes with malformed/orphaned GL lumps in a WAD
+ IWADs are now detected by combinations of unique lumps instead of simple filenames
+ Improved handling of PWADs with custom status bars that aren't widescreen
+ Improved height clipping for non-blocking map objects
+ New graphical startup sequence
+ Axis Test added to Mouse/Joystick control options menu to assist in mapping thumbsticks/analog triggers
+ Widescreen status bar extenders added for Freedoom 1/2, Heretic, and Blasphemer
+ Alternate liquid animations now apply when relevant graphics are used in HUD drawing functions (intermissions, etc)
+ Console dir/ls commands with just a mask for a parameter will search the current directory instead of requiring an explicit directory path
+ IDCLEV/warp will now work with non-standard map names
+ Slider options in the Option menu will be drawn with font symbols if an IMAGE DDFFONT type is in use (patch fonts will use the existing slider graphics)
+ Console will automatically scroll back to the bottom/input line after inputting a command
+ Level stat screens will how fallback to HUD fonts if certain images are missing ("Kills", "Items", etc)
+ DDFSTYLE: AUTOMAP background images/colors will now be used when drawing the automap if defined

New Features
------------
+ DP* sound lumps (PC speaker sounds) in the DOOM IWADs are now usable via DDFSFX

+ "PC Speaker Mode" option added to Sound Options menu. Only specific SFX will be used, and
  the MIDI player will switch to an appropriate soundfont
  -Imitation PC Speaker sounds added for Blasphemer, Heretic, and HacX

+ "Pistol Starts" option added to Gameplay Options menu (default Off). Will force player to default state upon
  starting a new level. Works with all supported IWADs

+ COALHUDS: new commands/variables
  -player.rts_enable_tagged(name): Will execute RTS script with matching tag, if one exists
  -hud.scroll_image(x, y, name, sx, sy, [noOffset]): will scroll an image in horizontal and/or vertical directions
  -hud.get_average_color(name): Will return an RGB vector with the average color of the named image lump
  -hud.get_average_top_border_color(name): Will return an RGB vector with the average top border color of the named image lump
  -hud.get_average_bottom_border_color(name): Will return an RGB vector with the average bottom border color of the named image lump
  -hud.get_lightest_color(name): Will return an RGB vector with the lightest color of the named image lump
  -hud.get_darkest_color(name): Will return an RGB vector with the darkest color of the named image lump
  -hud.get_average_hue(name): Will return an RGB vector with the average hue of the named image lump
  -hud.universal_y_adjust variable: Will apply a Y_ADJUST of this value to all weapon sprites
  
+ COALHUDS: modified commands
  -hud.draw_image(x, y, name, [noOffset]) has a new optional [noOffset] parameter which if set to 1, will ignore any X or Y offsets the image may have, both doom style and any defined in images.ddf
  -hud.stretch_image(x, y, w, h, name, [noOffset]) has a new optional [noOffset] parameter which if set to 1, will ignore any X or Y offsets the image may have, both doom style and any defined in images.ddf
  -hud.draw_text(x, y, str, [size]) has a new optional [size] argument to set the font size in pixels i.e. 16
  -hud.draw_num2(x, y, len, num, [size]) has a new optional [size] argument to set the font size in pixels i.e. 16
  -hud.draw_number(x, y, len, num, align_right, [size]) has a new optional [size] argument to set the font size in pixels i.e. 16
  
+ FONTS.DDF
  -New font type: IMAGE; an image with a 16x16 ASCII character layout with either a transparent or solid color background
  --Examples can be found at https://bmf.php5.cz/, https://dwarffortresswiki.org/index.php/Tileset_repository, and other sites that use spritesheet or bitmap fonts
  --Images can also be generated from TrueType fonts using https://lucide.github.io/Font-Atlas-Generator/
  --Required parameter: "IMAGE = <string>", which should refer to a DDFIMAGE definition of the image in question
  --Optional parameter: "SPACING = <int>", accepts positive or negative values to have fine-grain control over horizontal spacing of letters

+ IMAGES.DDF
  -New special: "IS_FONT = <bool>", needed when using an image in conjunction with the new IMAGE DDFFONT type. Will automatically set the background to transparent
   (if it isn't already), as well as apply the required mip/clamping flags to the texture
  -IMAGE_DATA command: 'DOOM' format can now be specified in addition to the already existing PNG/JPG/TGA formats

+ WEAPONS.DDF
  -Command: RENDER_INVERT=TRUE which will cause this weapon to render the sprites in reverse order
   i.e. Crosshair, flash, weapon. Mainly useful for not having to "cut out" the shape of the weapon
   muzzle from flash sprites. Also good for MD2 models so that the flash sprites are obscured
   by the weapon model
  -Command: Y_ADJUST=<number> which will offset the weapon sprites in Y
  (negative numbers move it down, positive numbers move it up). Mainly for Heretic compatibility
  -State Action: BECOME(<weapon name>,<state:frame>) Similar to the things.ddf action of the same 
   name.<state:frame> is optional
  -Command: ZOOM_FACTOR=<float> which will function as a traditional zoom magnification factor (1.5, 2.0, etc)
   and will be preferred over ZOOM_FOV if both are present
  -Command: NO_CHEAT=<bool> will prevent the weapon from being given to the player when using idkfa/idfa style cheats

+ SFX.DDF
  -Command: PC_SPEAKER_LUMP = <lumpname>; optional, specifies an alternate lump to use when in PC Speaker Mode

+ STYLES.DDF
  -PRE and END level texts now use style defined in entry [INTERLEVEL_TEXT] 
  
+ LEVELS.DDF
  -Command: LEAVING_BACKGROUND = <graphic>
  -Command: ENTERING_BACKGROUND = <graphic>  
  which can be used to override the intermission background defined in games.ddf on a per level basis.
  
+ THINGS.DDF
  -New SPECIAL: NO_TRIGGER_LINES which is similar to the same SPECIAL in attacks.ddf. Monsters flagged with 
   this special cannot activate special lines i.e. doors etc.
  -New SPECIAL: SHOVEABLE. If we push up against this thing then we can move it around. Mainly for
   Heretics pods.
  -New SPECIAL: NO_SPLASH. This thing causes no effects (i.e water splashes) on a floor defined in DDFFLAT as having an IMPACT_OBJECT  
  -KILL_BENEFIT: Will grant player benefits if they kill the mobj in question (does not apply when using KILLALL or similar cheats)
  -New ACTION: PLAYSOUND_BOSS(sfx) which will play the sound at full volume regardless of ALWAYS_LOUD flag

+ RTS: new commands
  -REPLACE_WEAPON <OldWeapon> <NewWeapon> which will replace one weapon with another instantly(no up/down states run) 
   if the player has it. It doesn't matter if we have the old one currently selected or not. Mainly for Heretic compatibility
  -WEAPON_EVENT <weapon> <label> which is similar to THING_EVENT: If we have the weapon we 
   insta-switch to it and go to the STATE we indicated
   
+ New Benefit Type: COUNTER01-COUNTER99. The idea behind this is to be able to store arbitrary values across savegames, for things
  like LIVES, SCORE, EXPERIENCE etc. To reflect this (and for convenience) the first 4 COUNTERS can be referenced like this:
	LIVES or COUNTER01
	SCORE or COUNTER02
	MONEY or COUNTER03
	EXPERIENCE or COUNTER04
  In DDF COUNTERs are usable as PICKUP_BENEFIT options; syntax is the same as giving ammo
  In RTS COUNTERs are usable for various commands; syntax is the same as for ammo i.e. ON_CONDITION COUNTER01(3)
  In COAL: 
	+ player.counter(counter_num) returns the value of the COUNTER
	+ player.set_counter(counter_num, value) allows us to change a COUNTER value

+ Partial UMAPINFO support
  - The following UMAPINFO keys are recognized:
  -- levelpic
  -- skytexture
  -- levelname
  -- music
  -- nextmap
  -- nextsecret
  -- exitpic
  -- enterpic
  -- endpic
  -- dobunny
  -- docast
  -- endgame
  -- interbackdrop
  -- intermusic
  -- intertextsecret
  -- partime

+ UDMF 1.1 Support
  - TEXTMAP parser adapted from EDGE 2.x
  - The following UDMF namespaces are currently supported:
  -- Doom
  -- Heretic
  -- ZDoomTranslated  
  
+ Heretic/Blasphemer support: vastly improved. Now 100% completeable from start to finish.

+ Console: clear/cls commands added to clear the current set of console lines (this does not clear the command history)

+ ENDOOM Support
  - Use the new `endoom` command in the console
  - Supports foreground/background colors and blinking
  - Supports ENDOOM, ENDTEXT, and ENDBOOM lumps


CHANGELOG for EDGE-Classic 1.1 (since EDGE-Classic 1.0)
====================================

Bugs fixed
----------
+ Longstanding SWIM sector special bug fixed. EDGE would continue 
  flagging the player as being in a SWIM sector even after leaving it. 
  Happens if SWIM special is used without AIRLESS(underwater) also. 
  Most noticeable side effect was being unable to jump/crouch and bizarre momentum/speed
+ Downgraded errors for incorrect 3D extrafloors to warnings instead. 
+ E3M4 crusher bug fixed.

General Improvements
--------------------
+ RTS Scripts can now use either a number or a string for their TAGs.

+ Replaced libpng, libjpeg and image_tga.cc with stb_image.

+ Replaced zlib with miniz.

+ Consolidated some EPI filesystem functions so that platform-specific source files aren't required.

+ Compilation now works with MSVC Build Tools. SDL2 development headers/libs included for this purpose.

+ Player Crouch height reduced to 28, same as other ports.

+ Bumped up the number of sound channels: minimum 32, maximum 96.


New Features
------------
+ Added inventory system
  + Controls: Inventory Previous, Inventory Use, and Inventory Next can now be bound to keys
  + DDF: INV01-INV25 are usable as PICKUP_BENEFIT options; syntax is the same as giving ammo
  + RTS: INV01-INV25 are usable for various commands; syntax is the same as for ammo i.e. ON_CONDITION INV01(3)
  + COAL: player.inventory_events(): event-based handling for keys based on Inventory Previous, Inventory Use, and Inventory Next bindings
  + COAL/RTS:  player.use_inventory(): will call RTS script of appropriate tag when inventory item is used; naming convention for inventory script tags is INVENTORY1 - INVENTORY25

+ Heretic COALHUDS updated with game-approriate inventory display

+ Added 'autoload' folder which is scanned for valid file types on startup. Sub-folders can fine tune what is loaded for specific IWADs.

+ Added "Animated Liquid Type" to Video Options menu; choices are "Vanilla", "SMMU", "SMMU + Swirl", and "Parallax"

+ FLATS.DDF (wad lump "DDFFLAT") which can be used to associate certain sounds, objects etc. with specific flats.
  - Command: LIQUID="THIN" or "THICK" can be added to a flat definition. Currently affects swirl/dynamic liquid parameters.
  - Command: IMPACT_OBJECT=<thing> where <thing> is an entry in THINGS.DDF. When the flat is shot, the <thing> will be spawned at the impact point (e.g. for splashes from water).
  - Command: FOOTSTEP = <sound> where <sound> is an entry in SFX.DDF. Can be used via COALHUDS to make appropriate sfx when moving across this flat.

+ LINES.DDF
  - New command: EFFECT_OBJECT=<thing> where <thing> is an entry in THINGS.DDF. When the line is activated, the <thing> will be spawned in the center of the line (e.g. for sparks from a switch). If the line is of type SHOOT then we spawn the object at the spot where the shot impacts instead.(e.g. a flesh wall that spurts blood when shot).
  - New command: GLASS=TRUE which causes this line type to (a)be blocking and (b)will apply the LINE_EFFECT= specials BLOCK_SHOTS and BLOCK_SIGHT if specified.
    Once the line is activated(normally via SHOOT) then (1) line will be set to unblocking, (2)BLOCK_SHOTS and BLOCK_SIGHT will be removed, (3) the mid-texture will be removed. 
    If combined with EFFECT_OBJECT then you can spawn shards of broken glass when the line "breaks" for example. NOTE: GLASS=TRUE should be used with COUNT=1.
  - New command: BROKEN_TEXTURE=<texture> which, when combined with GLASS=TRUE, will replace the mid-texture with this one instead of just removing it i.e. for shooting out a vent and replacing it with a broken vent.

+ COALHUDS: new commands
  -player.play_footstep(flatname) checks FLATS.DDF for corresponding entry and plays the sfx associated with this flat.
  -hud.screen_aspect() returns the current screen aspect e.g. 1.0, 1.333 etc.
  -hud.AM_HIDELINES for hud.automap_option() which hides all geometry on the automap.

+ RTS: new commands
  -SWITCH_WEAPON <weapon> which will force a switch to this <weapon> if the player has it.
  -TELEPORT_TO_START which will simply teleport the player back to player 1 start.
  
+ THINGS.DDF
  -Crouching now triggers CROUCH states for the player when used with CHECK_ACTIVITY.
  -Added player crouch spites to edge-defs.wad.

+ New XMP-based music player; MOD/S3M/IT/XM Tracker format songs are now supported.

+ New Game Music Emu-based music player; AY, GBS, GYM, HES, NSF, SAP, SPC, VGM format songs are now supported.

+ New WebSID-based music player; Commodore-64 SID format songs are now supported.

+ Main menu UI by default is now text based and uses strings from language.ddf and colouring/fonts defined in styles.ddf.
  If a pwad contains custom menu graphics then they will be used instead.
  
+ New names and DDF definitions for our menu sfx so we don't have to share the same names as normal doom sfx.
  
+ 2 new custom fonts included in edge-defs.wad for use with our new dynamic menu: Verdana-style font and Doom-style.

+ MBF sky transfer linetypes 271 and 272 partially supported via new line Effect "SKY_TRANSFER".

+ Dynamic Reverb option in Sound Menu. Will attempt to reverberate all sounds based on room size and being indoor/outdoors

+ SECTORS.DDF
  -Can add specials VACUUM_SFX, SUBMERGED_SFX, and REVERB_SFX to affect sounds while in that sector
  -REVERB_SFX has additional required parameters: REVERB_TYPE="REVERB" or "ECHO", REVERB_DELAY=(any number), and REVERB_RATIO=(0-100)


CHANGELOG for EDGE-Classic 1.0 (since EDGE-Classic Preview 1)
====================================

Bugs fixed
----------
- Apple compilation now works, thanks to testing and PRs from atsb/Gibbon

- Dropping the console with a movement key held down would preserve that movement while in the console. Now toggling the console properly drops (movement) input

- Games with only one selectable episode will now skip episode selection and proceed directly to the skill choice menu. This prevents the "Hell on Earth" episode from appearing when it is not appropriate

- Fixed bug with valid skybox texture references being deleted when cycling between real and pseudo-skyboxes

- Downgraded textures without patches from being an error (ending the program) to a warning

- Fixed occasional bug where attempting to bind a key would map it to the wrong command

- Fixed bug where canceling out of an RTS Menu would instead select the first option; now it should exit with no result

- Fixed player being allowed to attempt to load a game from an empty slot

- Fixed inheritance for DDFWEAP

- Sloped sectors underneath an extrafloor will now actually use their slope instead of 0 (fix backported from EDGE 2.x)


General Improvements
--------------------
+ Creating a new Save Game with a blank name will now generate a default name (gamepad users can now create new saves without a keyboard)

+ "Found Secret" message now uses DDFLANG.

+ Berserk colour tint is no longer hardcoded and can be modified via DDFCOLM.

+ Merged CeeJay's LINES DDF with ours to create the ULTIMATE LINES DDF ;)

+ Replaced GLBSP with AJBSP as EDGE-Classic's internal nodebuilder

+ doom_ddf folder content merged into edge.wad and the folder removed. The past is the future...again ;)

+ Migrated from SDL1 to SDL2 for longevity and potential new features

+ Allow for FRONT/BACK to be recognized as RIGHT/LEFT textures in the RTS CHANGE_TEX function to suit modder preferences

+ Added missing graphics for Harmony and HacX option menus (Sound, Mouse, Gameplay, etc.) so that they don't use the fallback/incorrectly
paletted Doom menu graphics

+ Improved joystick/gamepad handling; added ability to map dpad (hat) buttons and analog triggers to actions

+ Added "Menu Navigation" option in Controls to bind Menu Open/Up/Down/Left/Right/Select/Cancel

+ Added cursor to navigate RTS menus and select options in addition to using the number keys.

+ Added ability to remap functions previously hardcoded to the function keys (Quicksave, Quickload, etc)


New Features
------------
+ MP3 Sound Effects Support

+ ATTACKS.DDF:
  -New attack type: DOUBLE_SPAWNER to mimic the pain elemental in Doom64.

+ THINGS.DDF: 
  -New SPECIAL flag: FLOOR_CLIP. This things sprites will always stick to the floor in the case that it's too tall for the sector it's in.

+ More game IWADs supported: HACX, Herectic, Harmony, Blasphemer
  -HACX: Full support. Includes bug fixes and widescreen support by CeeJay. Some graphics credited to HACX 2 team.
  -Harmony: Full support. May be some (hopefully) minor differences.
  -Heretic: Partial support. Item inventory not implemented in the base engine yet.
  -Blasphemer: Rudimentary support; less thorough compared to Heretic, but IWAD will now be recognized and launch.

+ Experimental floor offset: any linetype that uses the SPECIALs "ALIGN FLOOR" or "ALIGN CEILING", if the line has texture offsets applied then EDGE will use those to offset the floor flat.

+ COALHUDS: New command
  strings.find(s,TextToFind): will find a sub-string at ANY position. Returns position it was found at or -1 if not found.

+ Added water splash sfx to EDGEs default SWIM sectors.


CHANGELOG for EDGE-Classic Preview 1 (since forking from EDGE 1.35)
====================================

Bugs fixed
----------
- TuttiFrutti effect. When the texture was shorter than the wall it was being applied to, the blank space was either filled with black or left invisible causing all sorts of graphical anomalies. Backported from EDGE 2.x branch.

- OUCH face on the hud was using incorrect damage value.

- Face on hud never looked left because random number was never > 1.

- Linetypes [268](Monster-only Silent Teleport W1 (Boom)) and [269](Monster-only Silent Teleport WR (Boom)) were incorrectly set as PUSH instead of WALK.

- Sliding doors activated by monsters now make the appropriate SFX.

- Crash-to-desktop bug when using WEAKNESS class finally fixed.

- Black screen after endgame: backported from 2.x branch.

- oof sfx behaviour now closer to original doom.

General Improvements
--------------------
+ Added more ammotypes:  Now we have from AMMO01 to AMMO24.

+ Ignore COAL bobbing commands "cam.set_vert_bob" and "cam.set_roll_bob"

+ Improved HUD: 
  -Added widescreen status bar courtesy of CeeJay. 
  -Revamped Overlay hud.
  -Removed AIRBAR graphics from edge.wad and rewrote the coal function to not use them.
  -Splash footsteps sfx when walking on liquid flats.

+ Lines.ddf
  -Edited all Slider doors to use BDOPN sfx.
  
+ Removed #VERSION check for both DDF and RTS. 

+ Made single option RTS MENUs respond to KEYD_JOY4 button.

+ Reduced Arachnotron width by 1. (Even though technically it is 64, this avoids issue with some pwads).

+ Reduced the lighting on several enemy attacks.

+ Default monitor ratio is set to 16:9 instead of 4:3 to accommodate most modern monitors.

+ Dynamic lighting, HQ2x, and Smoothing are now on by default to better highlight some of EDGE's rendering features.

+ Sliding doors now show on the Automap. 

+ Quietly ignore music lumps which aren't MIDI/OGG/MP3 instead of erroring out to Desktop.

+ Reduced the red tint while using the berserk power up.

+ M_SKULL1 menu cursor now uses DDFANIM (instead of being hardcoded to 2 frames). 

+ Much improved Doom skyboxes from https://forum.zdoom.org/viewtopic.php?f=46&t=53873&hilit=doom+skyboxes

New Features
------------
+ THINGS.DDF: 
  -FALLING_SOUND for the player when they fall long distances. Backported from EDGE 2.x branch.
  -SECRET_SOUND entry for the player which plays when he enters a sector marked SECRET. Backported from EDGE 2.x branch. DSSECRET SFX from K8vavoom.
  -New SPECIAL flag: IMMORTAL. This thing never recieves damage from any attacks, but will go into pain states etc as usual.

+ WEAPONS.DDF: new DJNE weapon action for more robust weapon reloading. Backported from EDGE 2.x branch.
Used just like JUMP(state_name:frame,xx%), but decrements the reload quantity for the specified attack and jumps if it's not zero. The jump chance is now interpreted as the attack specifier: 0% is the primary attack ammo, and non-zero percent is the secondary attack ammo.
 
+ Lines.ddf
  -Edited all Slider doors to use BDOPN sfx.
  -Added Hub Exit switches: [2000] to [2039]
  -Added Transparent Thick Extrafloors (for glass effect): [600]Most transparent to [603]Least transparent

+ Sectors.ddf
  -Added 2 new sector types: [50](Airless/Vacuum) and [65](Low Gravity)
 
+ Things.ddf
  -Added several dynamic light sources:
  [WHITE_LIGHT_FLOOR:7044] 
  [YELLOW_LIGHT_FLOOR:7045]
  [RED_LIGHT_FLOOR:7046]
  [BLUE_LIGHT_FLOOR:7047]
  [GREEN_LIGHT_FLOOR:7048]
  [ORANGE_LIGHT_FLOOR:7049]
     and
  [WHITE_LIGHT_CEILING:7054]
  [YELLOW_LIGHT_CEILING:7055]
  [RED_LIGHT_CEILING:7056]
  [BLUE_LIGHT_CEILING:7057]
  [GREEN_LIGHT_CEILING:7058]
  [ORANGE_LIGHT_CEILING:7059]
  -Added the relevant entries for FALLING_SOUND and SECRET_SOUND to player thing.

+ Styles.ddf
  -TITLE.COLOURMAP, TITLE.SCALE and TITLE.FONT will now affect the Title in an RTS MENU (via the MENU_STYLE RTS command).
  -TEXT.COLOURMAP, TEXT.SCALE and TEXT.FONT will now affect the Options in an RTS MENU (via the MENU_STYLE RTS command).
  -BACKGROUND images are now centered and obey scaling defined either in styles.ddf or images.ddf.
  
+ RTS
  - Text TIPs now accept a 4th parameter (like TIP_GRAPHICs) which is the scaling to apply.
  - PLAYSOUND_BOSSMAN: sfx location now set on player.
  - New Command "EXIT_GAME": exits out of the map and back to the main title screen.

+ New MIDI Player
  - Timidity has been replaced by TinySoundfont, with support for *.sf2 soundfont files instead of GUS patch sets
  - A Roland Sound Canvas style default soundfont by Nando Florestan has been included (http://dev.nando.audio/pages/soundfonts.html).
Users with existing soundfonts can replace soundfont/default.sf2 with their own font if desired (must be named default.sf2; selector may be built in the future).
  - TinySoundfont is now the default music player for both Linux and Window builds. 

+ MP3 Music Support

+ Titlescreen and intermission are now Widescreen compatible with https://forum.zdoom.org/viewtopic.php?f=46&t=67843

+ COALHUDS: 11 new commands
  player.kills() returns how many enemies killed on the current map.
  player.secrets() returns how many secrets discovered on current map.
  player.items() returns how many items picked up on the current map.
  player.map_enemies() returns total enemies on current map.
  player.map_secrets() returns total number of secrets on current map.
  player.map_items() returns total items on current map.
  player.floor_flat() returns the floor flat of the current sector we are in.
  player.sector_tag() returns the tag of the current sector we are in.
  hud.draw_number(x, y, len, num, align_right). hud.draw_num2() always 
    starts drawing the numbers from right-to-left. This new function 
    allows left-to right if we pass 0 for the align_right parameter, 
    or the usual draw_num2() right-to-left if we pass 1.
  math.random2() returns a random number between 0 and 10.
  hud.game_paused() returns 1 if the game is currently paused or 
    on the title menu screen.
